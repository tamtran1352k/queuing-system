import React, { useState } from "react";

import img from "../../img/1.png";

import {
  AppstoreOutlined,
  MenuFoldOutlined,
  MenuUnfoldOutlined,
  UploadOutlined,
  UserOutlined,
  VideoCameraOutlined,
  SettingOutlined,
} from "@ant-design/icons";
import {
  Layout,
  Menu,
  Button,
  theme,
  Image,
  Row,
  Col,
  Card,
  MenuProps,
} from "antd";
import { Footer } from "antd/es/layout/layout";
import { useDispatch } from "react-redux";
import { auth } from "../../firebase/fibase";
import { logout } from "../../redecers/authReducer";
import { Link, useNavigate } from "react-router-dom";
import { MenuItem } from "@ant-design/charts";

const { Header, Sider, Content } = Layout;

const MenuLayout: React.FC = () => {
  const navigate = useNavigate();
  const {
    token: { colorBgContainer },
  } = theme.useToken();
  const gridStyle: React.CSSProperties = {
    width: "25%",
    textAlign: "center",
  };
  const dispatch = useDispatch();
  const handleLogout = async () => {
    try {
      await auth.signOut();
      dispatch(logout());
      navigate("/");
    } catch (error) {
      console.log("Logout error:", error);
    }
  };
  type MenuItem = Required<MenuProps>["items"][number];

  function getItem(
    label: React.ReactNode,
    key?: React.Key | null,
    icon?: React.ReactNode,
    children?: MenuItem[],
    type?: "group"
  ): MenuItem {
    return {
      key,
      icon,
      children,
      label,
      type,
    } as MenuItem;
  }

  const items: MenuItem[] = [
    getItem(
      "Cài đặt hệ thống ",
      "sub3",
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
      >
        <path
          d="M8.68578 18.0437L8.68301 18.0421L4.11493 15.4093C3.16175 14.7663 2.78258 14.4693 2.59073 14.1388C2.40772 13.8237 2.36667 13.4258 2.36667 12.4087V7.59199C2.36667 6.57339 2.40559 6.17441 2.58449 5.86024C2.77032 5.53392 3.13834 5.24176 4.07395 4.60765L8.67509 1.94996L8.67617 1.94933C9.02135 1.74879 9.49263 1.63574 9.9875 1.63574C10.4824 1.63574 10.9537 1.74879 11.2988 1.94933L11.3004 1.95024L15.8851 4.59142C16.8383 5.23437 17.2174 5.5314 17.4093 5.86181C17.5923 6.177 17.6333 6.57483 17.6333 7.59199V12.4003C17.6333 13.4189 17.5944 13.8179 17.4155 14.1321C17.2297 14.4584 16.8617 14.7506 15.9261 15.3847L11.3261 18.0417C11.3259 18.0418 11.3257 18.0419 11.3255 18.042C10.9669 18.2477 10.4907 18.3587 10 18.3587C9.50799 18.3587 9.03359 18.2472 8.68578 18.0437ZM4.23307 4.81747L4.21803 4.82616L4.20364 4.83587L4.18752 4.84675C3.86164 5.06666 3.59376 5.24744 3.38776 5.41047C3.17516 5.57872 2.99255 5.7551 2.86229 5.97965C2.72902 6.2094 2.67395 6.44876 2.64865 6.70466C2.62498 6.94414 2.62499 7.23234 2.625 7.56891L2.625 7.59199V12.4003L2.625 12.4238C2.62499 12.76 2.62498 13.0487 2.64928 13.2892C2.67533 13.5468 2.73203 13.7872 2.86795 14.0184C3.00031 14.2434 3.18561 14.4215 3.40206 14.5926C3.61237 14.7588 3.88614 14.9441 4.22055 15.1703L4.23646 15.1811L4.2513 15.1911L4.26681 15.2001L8.81681 17.8251L8.81702 17.8252C9.16297 18.0246 9.60364 18.1045 10.0042 18.1045C10.4047 18.1045 10.8454 18.0246 11.1913 17.8252L11.1919 17.8249L15.7753 15.1748L15.7909 15.1658L15.8059 15.1556L15.822 15.1447C16.1458 14.9248 16.4121 14.744 16.6169 14.5809C16.8284 14.4125 17.01 14.236 17.1394 14.0115C17.2718 13.782 17.3264 13.5429 17.3515 13.2874C17.375 13.048 17.375 12.76 17.375 12.4233V12.4003V7.59199V7.56856C17.375 7.23229 17.375 6.94359 17.3507 6.70316C17.3247 6.44552 17.268 6.20512 17.132 5.97396C16.9997 5.74887 16.8144 5.57082 16.5979 5.39973C16.3876 5.23349 16.1138 5.04824 15.7794 4.82195L15.7635 4.81122L15.7487 4.80118L15.7332 4.79223L11.1862 2.16898C11.1857 2.16867 11.1851 2.16836 11.1846 2.16805C10.8382 1.96552 10.3984 1.89199 10 1.89199C9.60156 1.89199 9.1617 1.96554 8.81523 2.16814L4.23307 4.81747Z"
          stroke="#A9A9B0"
        />
        <path
          d="M10 12.625C8.55114 12.625 7.375 11.4489 7.375 10C7.375 8.55114 8.55114 7.375 10 7.375C11.4489 7.375 12.625 8.55114 12.625 10C12.625 11.4489 11.4489 12.625 10 12.625ZM10 7.625C8.69052 7.625 7.625 8.69052 7.625 10C7.625 11.3095 8.69052 12.375 10 12.375C11.3095 12.375 12.375 11.3095 12.375 10C12.375 8.69052 11.3095 7.625 10 7.625Z"
          fill="#292D32"
          stroke="#A9A9B0"
        />
      </svg>,
      [
        getItem("Quản lý vai trò", "vaitro"),
        getItem("Quản lý tài khoản", "qltk"),
        getItem("Nhật ký người dùng", "nknd"),
      ]
    ),
  ];

  const onClick: MenuProps["onClick"] = (e) => {
    console.log("click", e);
    if (e.key) {
      switch (e.key) {
        case "vaitro":
          navigate("/vaitro");
          break;
        case "qltk":
          navigate("/qltk");
          break;
        case "nknd":
          navigate("/nknd");
          break;
        default:
          break;
      }
    }
  };

  return (
    <Row>
      <Col span={4}>
        {" "}
        <Sider
          breakpoint="lg"
          collapsedWidth="0"
          style={{ background: "white", minHeight: "100vh" }}
          onBreakpoint={(broken) => {
            console.log(broken);
          }}
          onCollapse={(collapsed, type) => {
            console.log(collapsed, type);
          }}
        >
          <div className="demo-logo-vertical" />
          <Image src={img} />
          <Menu mode="inline" defaultSelectedKeys={["1"]}>
            <Menu.Item
              key="1"
              icon={
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    d="M18.3333 9.08366V3.41699C18.3333 2.16699 17.8 1.66699 16.475 1.66699H13.1083C11.7833 1.66699 11.25 2.16699 11.25 3.41699V9.08366C11.25 10.3337 11.7833 10.8337 13.1083 10.8337H16.475C17.8 10.8337 18.3333 10.3337 18.3333 9.08366Z"
                    stroke="white"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M18.3333 16.583V15.083C18.3333 13.833 17.8 13.333 16.475 13.333H13.1083C11.7833 13.333 11.25 13.833 11.25 15.083V16.583C11.25 17.833 11.7833 18.333 13.1083 18.333H16.475C17.8 18.333 18.3333 17.833 18.3333 16.583Z"
                    stroke="white"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M8.75 10.917V16.5837C8.75 17.8337 8.21666 18.3337 6.89166 18.3337H3.525C2.2 18.3337 1.66666 17.8337 1.66666 16.5837V10.917C1.66666 9.66699 2.2 9.16699 3.525 9.16699H6.89166C8.21666 9.16699 8.75 9.66699 8.75 10.917Z"
                    stroke="white"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M8.75 3.41699V4.91699C8.75 6.16699 8.21666 6.66699 6.89166 6.66699H3.525C2.2 6.66699 1.66666 6.16699 1.66666 4.91699V3.41699C1.66666 2.16699 2.2 1.66699 3.525 1.66699H6.89166C8.21666 1.66699 8.75 2.16699 8.75 3.41699Z"
                    stroke="white"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              }
            >
              <Link to={"/listt"}> Dashboard</Link>
            </Menu.Item>
            <Menu.Item
              key="2"
              icon={
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    d="M5.36666 1.66699H14.625C17.5917 1.66699 18.3333 2.40866 18.3333 5.36699V10.642C18.3333 13.6087 17.5917 14.342 14.6333 14.342H5.36666C2.40833 14.3503 1.66666 13.6087 1.66666 10.6503V5.36699C1.66666 2.40866 2.40833 1.66699 5.36666 1.66699Z"
                    stroke="#A9A9B0"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M10 14.3496V18.3329"
                    stroke="#A9A9B0"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M1.66666 10.833H18.3333"
                    stroke="#A9A9B0"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M6.25 18.333H13.75"
                    stroke="#A9A9B0"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              }
            >
              <Link to={"/table"}> Thiết bị </Link>
            </Menu.Item>
            <Menu.Item
              key="3"
              icon={
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="22"
                  height="19"
                  viewBox="0 0 22 19"
                  fill="none"
                >
                  <path
                    d="M21 7.18601C21 9.06092 19.9887 10.7464 18.3785 11.9193C18.3228 11.9583 18.2921 12.0251 18.2893 12.092L18.2197 13.9168C18.2113 14.1619 17.9411 14.304 17.7349 14.1731L16.1888 13.2008C16.1888 13.2008 16.1888 13.2008 16.186 13.2008C16.0968 13.1423 15.9882 13.1256 15.8879 13.1562C14.9685 13.4431 13.9684 13.6019 12.9209 13.6019C12.907 13.6019 12.893 13.6019 12.8791 13.6019C12.907 13.4181 12.9209 13.2314 12.9209 13.042C12.9209 10.426 10.252 8.30594 6.95906 8.30594C6.28209 8.30594 5.63297 8.39509 5.02564 8.55946C4.90306 8.1165 4.83899 7.65404 4.83899 7.18044C4.83899 3.63398 8.45509 0.761719 12.9181 0.761719C17.3839 0.767291 21 3.64234 21 7.18601Z"
                    stroke="#A9A9B0"
                    stroke-width="1.5"
                    stroke-miterlimit="10"
                  />
                  <path
                    d="M5.02842 8.56445C2.68547 9.20242 1 10.9687 1 13.047C1 14.4288 1.74662 15.6741 2.93342 16.5405C2.97521 16.5711 2.99749 16.6185 3.00028 16.6686L3.05042 18.0142C3.056 18.1953 3.25658 18.2984 3.40981 18.2037L4.55203 17.4849C4.56038 17.4793 4.57153 17.471 4.57989 17.4654C4.62167 17.432 4.67739 17.4208 4.72754 17.4376C5.41844 17.6604 6.17064 17.783 6.96183 17.783C10.0152 17.783 12.5336 15.9582 12.8819 13.6069"
                    stroke="#A9A9B0"
                    stroke-width="1.5"
                    stroke-miterlimit="10"
                  />
                </svg>
              }
            >
              <Link to={"/dv"}> Dịch vụ</Link>
            </Menu.Item>
            <Menu.Item
              key="4"
              icon={
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <g clip-path="url(#clip0_82036_3203)">
                    <path
                      d="M1.66666 14.167L10 18.3337L18.3333 14.167"
                      stroke="#A9A9B0"
                      stroke-width="1.66667"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M1.66666 10L10 14.1667L18.3333 10"
                      stroke="#A9A9B0"
                      stroke-width="1.66667"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M10 1.66699L1.66666 5.83366L10 10.0003L18.3333 5.83366L10 1.66699Z"
                      stroke="#A9A9B0"
                      stroke-width="1.66667"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_82036_3203">
                      <rect width="20" height="20" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              }
            >
              <Link to={"/cs"}> Cấp số </Link>
            </Menu.Item>
            <Menu.Item
              key="5"
              icon={
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="21"
                  viewBox="0 0 18 21"
                  fill="#A9A9B0"
                >
                  <g>
                    <path d="M5.29762 1.17525C5.29762 1.27029 5.29762 1.34751 5.29762 1.43067C5.29762 2.10783 5.30422 2.77905 5.29762 3.45621C5.29101 4.37098 4.61064 4.97092 3.59339 4.97092C2.77431 4.97092 1.96184 4.97092 1.14275 4.97092C0.039633 19.0547 1.61174 2.85627 4.26716 0.456511C8.71266 0.212971 12.4976 0.212971 16.2892 0.212971C17.9934 2.33355 16.9365 15.1937 16.9365 1.76925C16.9365 1.32969 16.7516 1.16337 16.2561 1.16337C12.6826 1.16337 9.10899 1.16337 5.52881 1.16337C5.46936 1.15743 5.3967 1.16931 5.29762 1.17525ZM1.89578 4.00269C1.89578 4.00269 1.90899 4.01457 1.9222 4.01457C2.39119 4.01457 2.86018 4.02051 3.32917 4.02051C4.14165 4.02051 4.22752 3.94329 4.22752 3.22455C4.22752 2.78499 4.22752 2.34543 4.22752 1.90587C3.44147 2.61273 2.66862 3.30771 1.89578 4.00269Z" />
                    <path d="M7.91993 11.8133C7.74158 11.9856 7.58966 12.146 7.41791 12.2945C6.67149 12.9657 5.92507 13.6428 5.17865 14.3081C4.8748 14.5814 4.47846 14.5398 4.28691 14.225C4.1614 14.023 4.20764 13.8389 4.43883 13.625C4.99369 13.1261 5.54856 12.6271 6.10342 12.1281C6.5658 11.7123 7.02158 11.2965 7.48397 10.8867C7.79443 10.6075 8.07186 10.6075 8.38232 10.8807C8.93058 11.3738 9.47883 11.8668 10.0073 12.342C10.9783 11.4688 11.9427 10.6016 12.9071 9.72837C12.6825 9.72837 12.4249 9.73431 12.1673 9.72837C11.8964 9.71649 11.6983 9.56799 11.652 9.35415C11.6058 9.14031 11.6983 8.93241 11.9031 8.84331C12.0021 8.80173 12.121 8.77203 12.2333 8.77203C12.8939 8.76609 13.5544 8.76609 14.215 8.77203C14.6179 8.77797 14.8161 8.96805 14.8161 9.33039C14.8161 9.91845 14.8161 10.5006 14.8161 11.0886C14.8161 11.4213 14.5981 11.6411 14.281 11.6411C13.9772 11.6411 13.7658 11.4272 13.7592 11.1005C13.7526 10.8986 13.7526 10.7025 13.7526 10.5006C13.7526 10.4887 13.7394 10.4768 13.6601 10.3699C13.6073 10.554 13.5809 10.554 13.5214 10.6075C12.5306 11.5044 11.5397 12.3954 10.5489 13.2864C10.179 13.6191 9.94122 13.6191 9.5647 13.2864C9.02966 12.8053 8.49461 12.3242 7.91993 11.8133Z" />
                    <path d="M13.7661 14.7065C13.7661 14.0115 13.7595 13.3106 13.7661 12.6156C13.7727 12.2176 14.1691 11.986 14.5258 12.1582C14.7173 12.2473 14.8164 12.3958 14.8164 12.5919C14.8164 14.0175 14.823 15.4431 14.8164 16.8687C14.8164 17.1538 14.572 17.3557 14.2814 17.3498C13.9973 17.3439 13.7727 17.1478 13.7727 16.8746C13.7595 16.1499 13.7661 15.4312 13.7661 14.7065Z" />
                    <path d="M7.40455 15.1103C7.40455 14.5222 7.39795 13.9401 7.40455 13.352C7.40455 13.0372 7.60272 12.8353 7.89997 12.8174C8.21703 12.7996 8.45483 13.0135 8.46143 13.3402C8.46804 13.7203 8.46143 14.0945 8.46143 14.4747C8.46143 15.2528 8.46143 16.031 8.46143 16.8091C8.46143 17.1358 8.28308 17.3378 7.98584 17.3616C7.64896 17.3913 7.40455 17.1834 7.39795 16.8448C7.40455 16.2686 7.40455 15.6924 7.40455 15.1103Z" />
                    <path d="M12.6958 15.2239C12.6958 15.7525 12.6958 16.2752 12.6958 16.8039C12.6958 17.1306 12.491 17.3385 12.1806 17.3444C11.8635 17.3504 11.6455 17.1306 11.6455 16.798C11.6455 15.7288 11.6455 14.6596 11.6455 13.5963C11.6455 13.2696 11.8503 13.0617 12.1607 13.0558C12.4778 13.0498 12.6958 13.2696 12.6958 13.6023C12.7024 14.1428 12.6958 14.6833 12.6958 15.2239Z" />
                    <path d="M10.5818 15.6869C10.5818 16.0492 10.5818 16.4115 10.5818 16.7798C10.5752 17.1362 10.3638 17.356 10.0467 17.3501C9.72967 17.3441 9.5249 17.1243 9.5249 16.7858C9.5249 16.0433 9.5249 15.3008 9.5249 14.5583C9.5249 14.2316 9.72967 14.0236 10.0401 14.0177C10.3704 14.0118 10.5752 14.2078 10.5818 14.5523C10.5884 14.9265 10.5818 15.3067 10.5818 15.6869Z" />
                    <path d="M5.29737 16.0255C5.29737 15.7582 5.29076 15.4909 5.29737 15.2236C5.30397 14.9147 5.52196 14.7247 5.83242 14.7306C6.12966 14.7365 6.34764 14.9326 6.34764 15.2236C6.35425 15.7642 6.35425 16.3047 6.34764 16.8452C6.34104 17.1422 6.10985 17.3501 5.8126 17.3442C5.52196 17.3383 5.31058 17.1363 5.29737 16.8452C5.29737 16.8334 5.29737 16.8155 5.29737 16.8037C5.29737 16.5423 5.29737 16.2869 5.29737 16.0255Z" />
                    <path d="M4.22745 16.6371C4.22745 16.7321 4.23406 16.8331 4.22745 16.9281C4.20103 17.1657 3.96323 17.3499 3.70562 17.3439C3.448 17.338 3.21681 17.1657 3.19699 16.94C3.17717 16.7321 3.17717 16.0846 3.19699 15.8767C3.21681 15.6391 3.46782 15.4669 3.73204 15.4728C3.99626 15.4787 4.20763 15.651 4.23406 15.8886C4.23406 15.9896 4.22745 16.5361 4.22745 16.6371Z" />
                  </g>
                </svg>
              }
            >
              <Link to={"/baocao"}> Báo cáo </Link>
            </Menu.Item>

            <Menu key="6" onClick={onClick} mode="vertical" items={items} />
          </Menu>
          <div style={{paddingTop:"150%"}}>
          <Button
            style={{
              backgroundColor: "#FFF2E7",
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              marginLeft: "20%",
            }}
            onClick={handleLogout}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="21"
              viewBox="0 0 20 21"
              fill="none"
              style={{ marginRight: "5px" }}
            >
              <path
                d="M13.3335 14.3734L17.5002 10.2067L13.3335 6.04004"
                stroke="#FF7506"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M17.5 10.207H7.5"
                stroke="#FF7506"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M7.5 17.707H4.16667C3.72464 17.707 3.30072 17.5314 2.98816 17.2189C2.67559 16.9063 2.5 16.4824 2.5 16.0404V4.3737C2.5 3.93167 2.67559 3.50775 2.98816 3.19519C3.30072 2.88263 3.72464 2.70703 4.16667 2.70703H7.5"
                stroke="#FF7506"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
            <b style={{ color: "#FF7506" }}>Đăng xuất</b>
          </Button>
          </div>
   
        </Sider>
      </Col>
    </Row>
  );
};

export default MenuLayout;
